function f=hx_dot(xx)
q0=xx(7);q1=xx(8);q2=xx(9);q3=xx(10);
A1=[2*q1*(1-2*(q1^2+q2^2))/((1-2*(q1^2+q2^2))^2+4*(q2*q3+q0*q1)^2);
    2*q2/(sqrt(1-4*(q1*q3-q0*q2)^2));
    2*q3*(1-2*(q3^2+q2^2))/((1-2*(q3^2+q2^2))^2+4*(q2*q1+q0*q3)^2)];
A2=[2*q0*(1-2*(q1^2+q2^2)+4*q1*(q2*q3+q0*q1))/((1-2*(q1^2+q2^2))^2+4*(q2*q3+q0*q1)^2);
    -2*q3/(sqrt(1-4*(q1*q3-q0*q2)^2));
    2*q2*(1-2*(q3^2+q2^2))/((1-2*(q3^2+q2^2))^2+4*(q2*q1+q0*q3)^2)];
A3=[2*q3*(1-2*(q1^2+q2^2)+4*q2*(q2*q3+q0*q1))/((1-2*(q1^2+q2^2))^2+4*(q2*q3+q0*q1)^2);
    2*q0/(sqrt(1-4*(q1*q3-q0*q2)^2));
    (2*q1*(1-2*(q3^2+q2^2))+4*q2*(q1*q2+q0*q3))/((1-2*(q3^2+q2^2))^2+4*(q2*q1+q0*q3)^2)];
A4=[2*q2*(1-2*(q1^2+q2^2))/((1-2*(q1^2+q2^2))^2+4*(q2*q3+q0*q1)^2);
    -2*q1/(sqrt(1-4*(q1*q3-q0*q2)^2));
    (2*q0*(1-2*(q3^2+q2^2))+4*q3*(q0*q3+q1*q2))/((1-2*(q3^2+q2^2))^2+4*(q2*q1+q0*q3)^2)];
A5=zeros(3,6);
f1=[A5,A1,A2,A3,A4,zeros(3,1)];
f2=[eye(3,3),zeros(3,8)];
f3=[zeros(3,3),eye(3,3),zeros(3,5)];
f=[f2;f3;f1];
% f=[A5,A1,A2,A3,A4,zeros(3,1)];
    