function f=hx_dot1(xx)
q0=xx(1);q1=xx(2);q2=xx(3);q3=xx(4);

%求h对q0--q3的偏导数
hq0=[2*q1*(1-2*(q1^2+q2^2))/((1-2*(q1^2+q2^2))^2+4*(q2*q3+q0*q1)^2);
    2*q2/sqrt(1-4*(q1*q3-q0*q2)^2);
    2*q3*(1-2*(q2^2+q3^2))/((1-2*(q2^2+q3^2))^2+4*(q1*q2+q0*q3)^2)];

hq1=[2*q0*(1-2*(q1^2+q2^2)+4*q1*(q2*q3+q0*q1))/((1-2*(q1^2+q2^2))^2+4*(q2*q3+q0*q1)^2);
    -2*q3/sqrt(1-4*(q1*q3-q0*q2)^2);
    2*q2*(1-2*(q2^2+q3^2))/((1-2*(q2^2+q3^2))^2+4*(q1*q2+q0*q3)^2)];

hq2=[2*q3*(1-2*(q1^2+q2^2)+4*q2*(q2*q3+q0*q1))/((1-2*(q1^2+q2^2))^2+4*(q2*q3+q0*q1)^2);
    2*q0/sqrt(1-4*(q1*q3-q0*q2)^2);
    2*q1*(1-2*(q2^2+q3^2)+4*q2*(q1*q2+q0*q3))/((1-2*(q2^2+q3^2))^2+4*(q1*q2+q0*q3)^2)];

hq3=[2*q2*(1-2*(q1^2+q2^2))/((1-2*(q1^2+q2^2))^2+4*(q2*q3+q0*q1)^2);
    -2*q1/sqrt(1-4*(q1*q3-q0*q2)^2);
    2*q0*(1-2*(q2^2+q3^2)+4*q3*(q1*q2+q0*q3))/((1-2*(q2^2+q3^2))^2+4*(q1*q2+q0*q3)^2)];


f=[hq0,hq1,hq2,hq3,zeros(3,1)];